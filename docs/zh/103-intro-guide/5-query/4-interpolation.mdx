---
title: 函数插值
description: 使用 interp 进行函数插值
---

在时序数据的分析中，可能需要补充局部的缺失数据，或者需要获得高于采集精度的时间序列。这时，通过使用 `INTERP` 函数，在指定时间点、或时间段内，按照指定的时间精度，对指定的数据列进行函数插值。

## 单点插值

在指定的时间点，得到一个插值点：

```sql
SELECT _irowts, INTERP(current) FROM test.d1021 RANGE('2017-07-14 12:00:00.000') FILL(LINEAR);
```

在上例中，伪列 `_irowts` 用于访问插值点所在的时间点；`INTERP(current)` 指定了以 `current` 作为样本进行插值；`RANGE(...)` 指定了插值点所在的时刻；`FILL(LINEAR)` 指定了插值模式为线性插值，即：选取 `current` 前后两个相邻的数据点，进行线性插值。  

## 区间插值

在指定的时间区间，得到一系列插值点：

```sql
SELECT _irowts, INTERP(current) FROM test.d1021 RANGE('2017-07-14 12:00:00.000','2017-07-15 12:00:00.000') EVERY(1h) FILL(PREV);
```

其中，`RANGE(...)` 指定了插值区间的起始和结束时刻；`EVERY(1h)` 区间之内每隔 1 小时插入一个插值点；在 `PREV` 插值模式下，插值点的值等于前一个相邻 `current` 的值。 

